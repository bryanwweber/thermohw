sudo: false
language: generic

# Only build on tags
if: tag IS present

env:
  global:
    secure: PNrNZupNoqnRGx3RYK5MY+18ZzQcit7J+mCfYdCFwjVNizWRgqqbclg0kRe2cyvL6Gnx+dDpkf8bhgCf8jIA42RGH9j4IIb5NNOTxtrJzpAyKsumsNW8YcqISU6dYYssJbXhjJNLVmF54s1hMSuXB8K1Kkj6roV1Qa8rqjDwZPjMjNciTACrw+/Vrgmq0A4ZEIka2Ebg3PDuPE91ibNADjnJkPDH054MhRL5PMx9gdN/eNWnp2Pp5+iMKt41nb76v5kewD8QiZ+inzyrbElvezjyjjzcqtUKZjDdDLKqJ9jDwZkeIkTuC8DuuptPsJ0zSscPrAvqmFI5iKlItgv5zO8nGaUD5T03wW+C3GB3ZZ5JvD68vSbLGPU8RHbdb9ywKObSPLElsSEJzmwMk0uNrEP33UQZGum/a4qAUtjxw5D/ViXJzeGr1Kc9RWYlCuTOfNU6jFs4QakW//dNNGOb1OF7wiX/+HlyGUOofeW79B7uV2mZzyC7PS/kHq/A8jC09JvZCo+kEgRmgO4kzeABO1tXXIjcUelEcwEpHLBOIHcEiMLduKgPbx/s3tTEIXU3jiibkJ5jrMgIsbZBpm1IANTDrctyrNpC7k9+D6uWIkF6bEGVo65heDqRsBEnn5Lcs2xhb2kVH9G3fbCntDVZNS1QqTrrU2WjpTTiDvn0UXk=

install:
  - wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
  - bash miniconda.sh -b -p $HOME/miniconda
  - rm miniconda.sh
  - source $HOME/miniconda/etc/profile.d/conda.sh && conda activate
  - conda config --set always_yes yes --set changeps1 no
  - conda update -q conda
  - conda update -q --all
  - conda config --append channels conda-forge
  - conda install conda-build anaconda-client conda-verify
  - conda info -a
  - conda list

script:
  - set -e
  - conda build conda.recipe
  - anaconda -t $ANACONDA_TOKEN upload $HOME/miniconda/conda-bld/*/thermohw*.tar.bz2

deploy:
  provider: pypi
  user: bryanwweber
  on:
    tags: true
  distributions: sdist bdist_wheel
  skip_upload_docs: true
  password:
    secure: FZ63wE5250Z1pXcLf+rFn/pJU+vhaVOBA4Ho7LpyTEL76LreFst3Z8jfPGKu7Ab1kp9HM4NOvKrqB2G40o5bXzim9dgEh3b0cx6AAX5hHKmUbMq8CPljBWjMsjm7m04a0lnqN09iecdPKe84waKrxV9Jpsqh/fnm0Mita/QghfbBhL6Hq82qjsbzsnTL07qUnOWxdFPft6WoI1Wnmn220XYYo8u/sjYhUwji3FPHx9P7qLWWiblDO1js3Gk6fTYKOTBIHblhZLAxZET508P87hhJT3uKO3XOfRCj+XX2Wdu3Hv4InDbBUdeyutD8jp5m+GWEHfpKnYJ2C0ScajxeannthtnLL1Ce9irFsm77wDNu5+Kmye/pURBh/guFPgb8KnCuLDzfMM7OfvOMzQgY2jyAQ22jnFGRpFHefo6GzobKHxnuPtU93Utl4Tdslv+on7YM3gaN17nxQZevMiQJFeAQoROopGtSpFitg8zOjHIi15q63wR8acSBXRj/bt8QahYqmGmeToJ5h9VnIKQciBQHt4CW9cctPRS4RHWc4XP8z2dh+cxG5PrbvgVA3urckkvLNaRCjwT/80cHqwQJvKozG9N1L09UYSwreALuf6cJcJuVdaTfXDB9RO+Pe+1WVUo+YfmIvq/GPGGDe8iGlJi8LQFwQ4h5VxSF+xUQsf0=
